!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/build/",i(i.s=6)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.authorizationField=t.authorizationField,this.gameRulesModalWindow=t.gameRulesModalWindow,this.winnerModalWindow=t.winnerModalWindow,this.userProfile=t.userProfile,this.exitGameBtn=t.exitGameBtn,this.gameRulesBtn=t.gameRulesBtn,this.shirtsList=t.shirtsList,this.difficultysList=t.difficultysList,this.scoreTable=t.scoreTable,this.game=i,this.showWinnerModalWindow=this.showWinnerModalWindow.bind(this),this.signIn=this.signIn.bind(this),this.selectUserProfileOptions=this.selectUserProfileOptions.bind(this),this.selectGameOptions=this.selectGameOptions.bind(this),this.shirtsList.addEventListener("click",this.selectGameOptions),this.difficultysList.addEventListener("click",this.selectGameOptions),this.userProfile.querySelector(".user_profile_menu").addEventListener("click",this.selectUserProfileOptions)}return n(e,[{key:"selectGameOptions",value:function(e){var t=e.target,i="."+this.difficultysList.className+"__item",n="."+this.shirtsList.className+"__item  ",a=t.closest(i)||t.closest(n);if(a){var r=a.parentNode.className,s=r+"__item--active";a.parentNode.querySelector("."+s).classList.remove(s),a.classList.add(s),null!==document.querySelector(".game_field")&&this.changeGameSettings(r)}}},{key:"changeGameSettings",value:function(e){var t=document.querySelector("."+e+"__item--active");switch(e){case"difficultys":this.game.settings.gameField.width=t.dataset.countOfColumns,this.game.settings.gameField.height=t.dataset.countOfRows,this.game.restart();break;case"shirts":this.game.gameField.setShirtCard(t.dataset.shirtName)}}},{key:"selectUserProfileOptions",value:function(e){switch(e.target.closest(".profile_menu_link").dataset.action){case"signOut":this.signOut()}}},{key:"saveUserCredentials",value:function(){var e={firstName:this.authorizationField.querySelector(".firstName-field").value,secondName:this.authorizationField.querySelector(".secondName-field").value,email:this.authorizationField.querySelector(".email-field").value};localStorage.setItem("user",JSON.stringify(e))}},{key:"showUserProfile",value:function(){var e=this.userProfile.querySelector(".profile_link__user_fullName"),t=JSON.parse(localStorage.getItem("user"));e.appendChild(document.createTextNode(t.firstName+" "+t.secondName)),this.userProfile.style.visibility="visible"}},{key:"showAuthorizationField",value:function(){document.querySelector(".game-lobby").appendChild(this.authorizationField)}},{key:"signIn",value:function(){this.saveUserCredentials(),this.showUserProfile(),this.authorizationField.remove()}},{key:"signOut",value:function(){localStorage.removeItem("user"),this.userProfile.querySelector(".profile_link__user_fullName").firstChild.remove(),this.userProfile.style.visibility="hidden",this.game.gameField.gameTimer.hide(),this.game.gameField.gameFieldDOM.remove(),this.showAuthorizationField()}},{key:"initScoreList",value:function(){var e=JSON.parse(localStorage.getItem("scoreList"));if(e)for(var t=0;t<e.length;t++)this.addGameResult.call(this.scoreTable,e[t],t);else localStorage.setItem("scoreList",JSON.stringify([]))}},{key:"addGameResult",value:function(e,t){var i=e.fullName,n=e.score,a=e.time,r=this.tBodies[0].insertRow(t);r.insertCell(0).innerHTML=i,r.insertCell(1).innerHTML=n,r.insertCell(2).innerHTML=a}},{key:"updateScoreList",value:function(e){var t=document.querySelector(".score_table"),i=~~({easy:10,medium:20,hard:30,nightmare:40}[document.querySelector(".difficultys__item--active").dataset.value]/(e.ms/36e5)),n=JSON.parse(localStorage.getItem("user")),a=n.firstName+" "+n.secondName,r=JSON.parse(localStorage.getItem("scoreList"));r.push({time:e.onOutput,score:i,fullName:a}),r.sort(function(e,t){return t.score-e.score}),r.length>10&&r.pop(),t.tBodies[0].innerHTML="";for(var s=0;s<r.length;s++)this.addGameResult.call(t,r[s],s);return localStorage.setItem("scoreList",JSON.stringify(r)),i}},{key:"initGameRulesModalWindow",value:function(){document.body.appendChild(this.gameRulesModalWindow),this.gameRulesBtn.addEventListener("click",this.changeModalWindowState.bind(this.gameRulesModalWindow,{stateName:"expand",flag:"open"})),this.gameRulesModalWindow.addEventListener("click",this.changeModalWindowState.bind(this.gameRulesModalWindow,{stateName:"collapse",flag:"close"}))}},{key:"initWinnerModalWindow",value:function(){document.body.appendChild(this.winnerModalWindow),this.winnerModalWindow.querySelector(".play_again_btn").addEventListener("click",this.playAgainBtnHandler.bind(this))}},{key:"playAgainBtnHandler",value:function(){this.changeModalWindowState.call(this.winnerModalWindow,{stateName:"runaway",flag:"close"}),this.game.restart()}},{key:"showWinnerModalWindow",value:function(e){var t=e.score,i=e.time,n=document.querySelector(".modal_window--winner");n.querySelector(".results_time").innerHTML=i,n.querySelector(".results_score").innerHTML=t,this.changeModalWindowState.call(n,{stateName:"run",flag:"open"})}},{key:"changeModalWindowState",value:function(e){var t=e.stateName,i=e.flag;switch(this.dataset.state=t,i){case"open":document.body.classList.add("modal-active");break;case"close":document.body.classList.remove("modal-active")}}},{key:"winningHandler",value:function(e){var t=this,i=this.updateScoreList(e);setTimeout(function(){t.showWinnerModalWindow({time:e.onOutput,score:i})},1500)}}]),e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timerDOM=t,this.delay=i,this.isOn=!1,this.time=0,this.interval=null,this.offset=null}return n(e,[{key:"start",value:function(){var e=this;this.isOn||(this.timerDOM.style.visibility="visible",this.interval=setInterval(function(){return e.update()},this.delay),this.offset=Date.now(),this.isOn=!0)}},{key:"stop",value:function(){this.isOn&&(clearInterval(this.interval),this.interval=null,this.isOn=!1)}},{key:"hide",value:function(){console.log("timer"),this.stop(),this.reset(),this.timerDOM.style.visibility="hidden"}},{key:"reset",value:function(){this.time=0,this.update()}},{key:"delta",value:function(){var e=Date.now(),t=e-this.offset;return this.offset=e,t}},{key:"update",value:function(){this.isOn&&(this.time+=this.delta());var e=this.timeFormater();this.timerDOM.textContent=e}},{key:"timeFormater",value:function(){var e=new Date(this.time),t=e.getMinutes().toString(),i=e.getSeconds().toString(),n=e.getMilliseconds().toString();for(t.length<2&&(t="0"+t),i.length<2&&(i="0"+i);n.length<3;)n="0"+n;return t+" : "+i+" . "+n}},{key:"toString",value:function(){return this.timeFormater()}}]),e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t,this.cardDOM=i}return n(e,[{key:"flip",value:function(){this.setAnimation("flip")}},{key:"showAndHide",value:function(){var e=this;setTimeout(function(){e.setAnimation("flip")},500),this.setAnimation("flip")}},{key:"remove",value:function(e){var t=this;e?(setTimeout(function(){t.setAnimation("getOut")},500),this.setAnimation("flip")):this.setAnimation("getOut")}},{key:"setAnimation",value:function(e){this.offsetWidth=void 0,this.cardDOM.classList.toggle(e)}}]),e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=o(i(2)),r=o(i(1)),s=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){var i=t.cardShortName,n=t.width,a=t.height;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameFieldDOM=document.querySelector(".game_field"),this.cardShortName=i,this.countOfCards=n*a,this.cardTocompare=void 0,this.gameTimer=new r.default(document.getElementsByClassName("timer")[0],40),this.gamePause=!1,this.imgs=["brint","curry","davis","duncan","granger","griffin","harden","iguodala","irving","jordan","mello","nowitzky","rose","wade","wall"]}return n(e,[{key:"fill",value:function(){var e=this;this.setShirtCard(this.cardShortName);var t=document.createElement("div");t.innerHTML="<div class='card_shirt'></div><div class='card_front'></div>",t.className="game_field__card",t.dataset.animationStyle="none",this.generateRandomValues().forEach(function(i){var n=t.cloneNode(!0);n.classList.add("card_"+e.imgs[i]),e.gameFieldDOM.appendChild(n)}),this.clickOnCard=this.clickOnCard.bind(this),this.clickOnCard.isItfirstClick=!0,this.gameFieldDOM.addEventListener("click",this.clickOnCard)}},{key:"compare",value:function(e){var t=this,i=e.classList[1],n=i.slice(i.indexOf("_")+1),r=new a.default(this.imgs.indexOf(n),e);if(!this.gamePause){switch(this.cardTocompare){case void 0:this.cardTocompare=r,r.flip();break;default:this.cardTocompare.value===r.value&&this.cardTocompare.cardDOM!==r.cardDOM?(this.setPause(),setTimeout(function(){t.cardTocompare.remove(),t.cardTocompare=void 0},500),r.remove(!0),this.countOfCards+=-2):this.cardTocompare.value!==r.value?(this.setPause(),setTimeout(function(){t.cardTocompare.flip(),t.cardTocompare=void 0},500),r.showAndHide()):(r.flip(),this.cardTocompare=void 0)}if(!this.countOfCards){this.gameTimer.stop();var o={onOutput:this.gameTimer.toString(),ms:this.gameTimer.time};s.default.prototype.winningHandler(o)}}}},{key:"setPause",value:function(){var e=this;this.gamePause=!0,setTimeout(function(){e.gamePause=!1},700)}},{key:"runGameTimer",value:function(){this.gameTimer.timerDOM.style.visibility="visible",this.gameTimer.start()}},{key:"clickOnCard",value:function(e){var t=e.target;t.closest(".game_field__card")&&(this.clickOnCard.isItfirstClick&&(this.runGameTimer(),this.clickOnCard.isItfirstClick=!1),this.compare(t.parentElement))}},{key:"generateRandomValues",value:function(){return Array.from({length:this.countOfCards},function(e,t){return Math.floor(t/2)}).sort(function(){return Math.random()-.5})}},{key:"generateCardsStyles",value:function(){var e=document.createElement("style");e.type="text/css",document.getElementsByTagName("head")[0].appendChild(e),this.imgs.forEach(function(t,i){var n="--card-front: url('../resources/img/cards-fronts/"+t+".jpg');";e.sheet.insertRule(".card_"+t+" {"+n+"}",i)})}},{key:"setShirtCard",value:function(e){this.gameFieldDOM.style.setProperty("--card-shirt",'url("../resources/img/shirts/'+e+'.png")')}}]),e}();t.default=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(3),s=(n=r)&&n.__esModule?n:{default:n};var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gameField=null,this.settings={gameField:null,difficulty:null}}return a(e,[{key:"start",value:function(){var e=document.querySelector(".difficultys__item--active").dataset;this.settings.gameField={width:e.countOfColumns,height:e.countOfRows,cardShortName:document.querySelector(".shirts__item--active").dataset.shirtName},this.settings.difficulty=e.value,this.createGameField(),this.gameField.generateCardsStyles()}},{key:"createGameField",value:function(){var e=document.createElement("div");e.className="game_field",e.style.setProperty("--count-of-columns",this.settings.gameField.width),document.querySelector(".game-lobby").appendChild(e),this.gameField=new s.default(this.settings.gameField),this.gameField.fill()}},{key:"restart",value:function(){document.querySelector(".game-lobby").innerHTML="",this.gameField.gameTimer&&(this.gameField.gameTimer.stop(),this.gameField.gameTimer.reset()),this.createGameField()}}],[{key:"updateScoreList",value:function(){}}]),e}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=[],t=!1,i=function(i){if(!t&&("readystatechange"!==i.type||"complete"===document.readyState)){for(var n=0;n<e.length;n++)e[n].call(document);t=!0,e=null}};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),document.addEventListener("readystatechange",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",i),window.attachEvent("onload",i));return function(i){t?i.call(document):e.push(i)}}();t.default=n},function(e,t,i){"use strict";var n=s(i(5)),a=s(i(0)),r=s(i(4));function s(e){return e&&e.__esModule?e:{default:e}}(0,n.default)(function(){var e=new r.default,t=new a.default({authorizationField:document.getElementById("authorization_doc").import.querySelector(".authorization-field"),gameRulesModalWindow:document.getElementById("game_rules_modal_doc").import.querySelector(".modal_window--game_rules"),winnerModalWindow:document.getElementById("winner_modal_doc").import.querySelector(".modal_window--winner"),userProfile:document.querySelector(".header__user_profile"),exitGameBtn:document.querySelector(".exit_game_button"),gameRulesBtn:document.querySelector(".game_rules_button"),shirtsList:document.querySelector(".shirts"),difficultysList:document.querySelector(".difficultys"),scoreTable:document.querySelector(".score_table")},e);t.initGameRulesModalWindow(),t.initWinnerModalWindow(),t.changeModalWindowState.call(t.gameRulesModalWindow,{stateName:"expand",flag:"open"}),t.initScoreList(),localStorage.getItem("user")?(t.showUserProfile(),e.start()):(t.showAuthorizationField(),document.getElementsByClassName("form-authorization")[0].addEventListener("submit",function(i){new Promise(function(e){t.signIn(),i.preventDefault(),e()}).then(function(){e.start()}),i.preventDefault()}))})}]);
//# sourceMappingURL=bundle.js.map